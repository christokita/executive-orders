# Load packages, functions, and data
source("scripts/util/_Util_Master.R")
# Load packages, functions, and data
source("scripts/util/__Util_MASTER.R")
require(stringr)
require(string)
require(string) == F
lapply(required_packages, library, character.only = T)
####################
# Load packages
####################
required_packages <- c("dplyr", "stringr", "tidyr")
lapply(required_packages, library, character.only = T)
lapply(required_packages, require, character.only = T)
source("scripts/util/__Util_MASTER.R")
####################
# Load data
####################
load("data/eosCurated.RData")
View(eos)
head(eos$text)
eos$text[1]
names(eos)
####################
# Prep data
####################
eo_text <- eos %>%
select(num, text)
table(duplicated(eos$num))
####################
# Prep data
####################
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text))
View(eo_text)
eo_text$text[1]
####################
# Prep data
####################
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% #remove non-letters
mutate(text = gsub("^[ ]+", "", text))
eo_text$text[1]
####################
# Prep data
####################
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gusb("[ ]+", " ", text)) # remove extra space
####################
# Prep data
####################
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text)) # remove extra space
####################
# Prep data
####################
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text)) %>%  # remove extra space
mutate(text = tolower(text))
eo_text$text[1]
eos$text[1]
source("scripts/util/__Util_MASTER.R")
stopwords()
?stemDocument
stemDocument(eo_text$text[1])
install.packages('tm')
install.packages("tm")
source("scripts/util/__Util_MASTER.R")
stemDocument(eo_text$text[1])
install.packages("SnowballC")
library(SnowballC)
stemDocument(eo_text$text[1])
####################
# Prep data
####################
# Get stopwords
stop_words <- paste(stopwords('en'), collapse = "|")
#
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text)) %>%  # remove extra space
mutate(text = tolower(text)) %>%
#
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = tolower(text)) %>% # make lowercase
mutate(text = gsub(stop_words, "", text)) %>% # remove stopwords
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text))  # remove extra space
eo_text$text[1]
####################
# Prep data
####################
# Get stopwords
stop_words <- paste(c("\\b", stopwords('en'), "\\b"), collapse = "\\b|\\b")
stop_words
####################
# Prep data
####################
# Get stopwords
stop_words <- paste(stopwords('en'), collapse = "\\b|\\b")
stop_words <- paste0('\\b', stop_words, '\\b')
####################
# Prep data
####################
# Get stopwords
stop_words <- paste(stopwords('en'), collapse = "\\b|\\b")
stop_words <- paste0('\\b', stop_words, '\\b')
# Process
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = tolower(text)) %>% # make lowercase
mutate(text = gsub(stop_words, "", text)) %>% # remove stopwords
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text))  # remove extra space
eo_text$text[1]
eos$text[1]
eos$text[1]
# Process
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("\\b[0-9]+st\\b|\\b[0-9]+nd\\b|\\b[0-9]+th\\b", "", text)) %>% # remove 1st, 2nd, etc.
mutate(text = gsub("\\([a-z]\\)", "", text)) %>% # remove (a), (b), etc.
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = tolower(text)) %>% # make lowercase
mutate(text = gsub(stop_words, "", text)) %>% # remove stopwords
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text))  # remove extra space
eo_text$text[1]
# Process
eo_text <- eos %>%
select(num, text) %>%
mutate(text = gsub("\\b[0-9]+st\\b|\\b[0-9]+nd\\b|\\b[0-9]+th\\b", "", text)) %>% # remove 1st, 2nd, etc.
mutate(text = gsub("\\([a-z]\\)", "", text)) %>% # remove (a), (b), etc.
mutate(text = gsub("[^A-Za-z ]", "", text)) %>% # remove non-letters
mutate(text = tolower(text)) %>% # make lowercase
mutate(text = gsub(stop_words, "", text)) %>% # remove stopwords
mutate(text = gsub("^[ ]+", "", text)) %>% # remove leading whitespace
mutate(text = gsub("[ ]+$", "", text)) %>% # remove trailing whitespace
mutate(text = gsub("[ ]+", " ", text)) %>%  # remove extra space
mutate(text = stemDocument(text))
eo_text$text[1]
# Make document-term matrix
eo_dtm <- DocumentTermMatrix(eo_text)
# Make document-term matrix
eo_dtm <- DocumentTermMatrix(eo_text$text)
# Make document-term matrix
eo_words <- eo_text %>%
unnest_tokens(word, text)
source("scripts/util/__Util_MASTER.R")
# Make document-term matrix
eo_words <- eo_text %>%
unnest_tokens(word, text)
View(eo_words)
names(eo_words)
# Count words by document
word_counts <- eo_words %>%
count(num, word, sort = TRUE)
View(word_counts)
# Count words by document
document_dtm <- word_counts %>%
cast_dtm(num, word, n)
View(document_dtm)
document_dtm
# Count words by document
eo_dtm <- word_counts %>%
cast_dtm(num, word, n)
####################
# Topic model
####################
eo_lda <- LDA(eo_dtm, k = 20, control = list(seed = 323))
####################
# Interpret model
####################
eo_topics <- tiedy(eo_lda, matrix = "beta")
####################
# Interpret model
####################
eo_topics <- tidy(eo_lda, matrix = "beta")
View(eo_topics)
eo_top_terms <- eo_topics %>%
group_by(topic) %>%
top_n(10, beta) %>%
ungroup() %>%
arrange(topic, -beta)
View(eo_top_terms)
source("scripts/000-utilityFunctionsEO.R")
source("scripts/util/__Util_MASTER.R")
source("scripts/util/__Util_MASTER.R")
stopwards("en")
stopwords('en')
stopwords('smart')
